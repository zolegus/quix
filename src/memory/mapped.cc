//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
#include <memory/mapped.cpp>
#include <utility/testing.h>
#include <string>
#include <memory>
#include <fstream>
//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
constexpr int mb = 1024576;
//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
struct plumbing
{
  plumbing()
  {
    structors_stack();
    structors_heap();
  }

  void structors_stack()
  {
		std::string filename( "/tmp/mmfile1.dat" );
		std::ofstream( filename ).seekp( mb );
		memory::mapped mapped1( filename, 0, 1048576 );
  }

  void structors_heap()
  {
		std::string filename( "/tmp/mmfile2.dat" );
		std::ofstream( filename ).seekp( mb );
    auto mapped1 = std::make_shared< memory::mapped >( filename, 0, 1048576 );
  }
}
plumbing;
//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
struct api
{
  api()
  {
    test();
  }

  void test()
  {
  }
}
api;
//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
struct scenarios
{
  scenarios()
  {
    test();
  }

  void test()
  {
  }
}
scenarios;
//
///////////////////////////////////////////////////////////////////////////////////////////////////
//
